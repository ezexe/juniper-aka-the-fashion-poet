<UserControl
    x:Class="Juniper.WinUI.App.Controls.SemanticZoomBaseUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Juniper.WinUI.App.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:dynamo="using:Juniper.Core.AWS.DynamoDB"
    xmlns:tables="using:Juniper.Core.AWS.DynamoDB.Tables"
    mc:Ignorable="d">
    <UserControl.Resources>
        <CollectionViewSource
            x:Name="CollectionOfCVS"
            Source="{x:Bind ItemsSource}"
            ItemsPath="{x:Bind PropertyPath}"
            IsSourceGrouped="true" />
    </UserControl.Resources>
    <Grid
        Background="{ThemeResource HomePageBackgroundBrush}"
        Padding="{StaticResource PageDefaultPadding}">
        <Grid.RowDefinitions>
            <RowDefinition
                Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState
                    x:Name="WideState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger
                            MinWindowWidth="{StaticResource Breakpoint640Plus}" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter
                            Target="wideSeZo.Visibility"
                            Value="Visible" />
                        <Setter
                            Target="narrowSeZo.Visibility"
                            Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <local:PageTitleHeaderUserControl
            x:Name="PageTitleHeader"
            x:FieldModifier="public"
            HeaderText="{x:Bind HeaderText,Mode=OneWay}"
            HeaderOptionsContent="{x:Bind HeaderOptionsContent}">
            <local:PageTitleHeaderUserControl.HeaderContent>
                <CommandBar
                    Grid.Column="1"
                    HorizontalAlignment="Right"
                    HorizontalContentAlignment="Right"
                    VerticalAlignment="Center"
                    DefaultLabelPosition="Bottom"
                    Margin="{StaticResource ActionsPaddingSmallUp}">
                    <AppBarSeparator />

                    <AppBarButton
                        x:Name="AbbTags"
                        Label="Set Tags"
                        Icon="Tag"
                        Visibility="Collapsed"
                        ToolTipService.ToolTip="Set tags to selected">
                        <AppBarButton.Flyout>
                            <Flyout>
                                <Flyout.Content>
                                    <StackPanel>
                                        <GridView
                                            x:Name="Gvtags"
                                            SelectionMode="Multiple"
                                            ItemsSource="{x:Bind dynamo:TagsLibrary.Current.TagsList}"
                                            ItemContainerStyle="{StaticResource InvisGridViewItemStyle}"
                                            Width="{StaticResource MultipleOf4RectWidthXLarge}">
                                            <GridView.ItemTemplate>
                                                <DataTemplate
                                                    x:DataType="tables:TagsTable">
                                                    <TextBlock
                                                        Width="500"
                                                        Style="{StaticResource BodyTextBlockStyle}">
                                                        <Run
                                                            Text="{x:Bind TagName}" />
                                                        <Run
                                                            Text=" - " />
                                                        <Run
                                                            Text="{x:Bind TagValue}" />
                                                    </TextBlock>
                                                </DataTemplate>
                                            </GridView.ItemTemplate>
                                        </GridView>

                                        <Button
                                            ToolTipService.ToolTip="Create new tag"
                                            Style="{StaticResource AccentButtonStyle}"
                                            Command="{x:Bind ViewModel.OnCommand}"
                                            CommandParameter="CommandAddTags">
                                            <Button.Content>
                                                <SymbolIcon
                                                    Symbol="Add" />
                                            </Button.Content>
                                        </Button>
                                        <Button
                                            Style="{StaticResource AccentButtonStyle}"
                                            Click="SetDocumentTags_Click">
                                            <Button.Content>
                                                <SymbolIcon
                                                    Symbol="Save" />
                                            </Button.Content>
                                        </Button>
                                    </StackPanel>
                                </Flyout.Content>
                            </Flyout>
                        </AppBarButton.Flyout>
                    </AppBarButton>

                    <AppBarButton
                        Label="Clear Filter"
                        Icon="Filter"
                        ToolTipService.ToolTip="Clear filters back to original list"
                        Command="{x:Bind ViewModel.OnCommand}"
                        CommandParameter="CommandClearFilters">
                    </AppBarButton>

                    <AppBarToggleButton
                        x:Name="ABBBullets"
                        Icon="Bullets"
                        Label="Selection"
                        ToolTipService.ToolTip="Toggle to enable multiple selection."
                        Click="ABBBullets_Click" />

                    <CommandBar.Content>
                        <ContentPresenter
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch"
                            Margin="0,-4,0,0"
                            Content="{x:Bind HeaderContent}" />
                    </CommandBar.Content>
                </CommandBar>
            </local:PageTitleHeaderUserControl.HeaderContent>
        </local:PageTitleHeaderUserControl>

        <SemanticZoom
            x:Name="wideSeZo"
            Grid.Row="1"
            Visibility="Collapsed"
            IsZoomedInViewActive="False">
            <SemanticZoom.ZoomedInView>
                <GridView
                    x:Name="gvItems"
                    ItemTemplate="{x:Bind ItemTemplate}"
                    ItemsSource="{Binding Source={StaticResource CollectionOfCVS}}"
                    ItemsPanel="{StaticResource ZoomedInItemsPanelTemplateWide}"
                    IsItemClickEnabled="True"
                    SelectionMode="None"
                    ItemClick="GridView_ItemClick">
                    <GridView.GroupStyle>
                        <GroupStyle
                            HeaderTemplate="{StaticResource GroupHeaderTemplateWide}"
                            HidesIfEmpty="False" />
                    </GridView.GroupStyle>
                </GridView>
            </SemanticZoom.ZoomedInView>
            <SemanticZoom.ZoomedOutView>
                <GridView
                    ItemsSource="{Binding CollectionGroups, Source={StaticResource CollectionOfCVS}}"
                    ItemTemplate="{StaticResource ZoomedOutTemplateWide}" />
            </SemanticZoom.ZoomedOutView>
        </SemanticZoom>
        <SemanticZoom
            x:Name="narrowSeZo"
            Grid.Row="1"
            IsZoomedInViewActive="False">
            <SemanticZoom.ZoomedInView>
                <ListView
                    ItemTemplate="{x:Bind ItemTemplate}"
                    ItemsSource="{Binding Source={StaticResource CollectionOfCVS}}"
                    x:Name="lvItems"
                    IsItemClickEnabled="True"
                    SelectionMode="None"
                    ItemClick="ListView_ItemClick">
                    <ListView.GroupStyle>
                        <GroupStyle
                            HeaderContainerStyle="{StaticResource GroupHeaderContainerStyle}"
                            HeaderTemplate="{StaticResource GroupHeaderTemplate}"
                            HidesIfEmpty="False" />
                    </ListView.GroupStyle>
                </ListView>
            </SemanticZoom.ZoomedInView>
            <SemanticZoom.ZoomedOutView>
                <ListView
                    ItemsSource="{Binding CollectionGroups, Source={StaticResource CollectionOfCVS}}"
                    ItemTemplate="{StaticResource ZoomedOutTemplate}"
                    ItemContainerStyle="{StaticResource ZoomedOutContainerStyle}" />
            </SemanticZoom.ZoomedOutView>
        </SemanticZoom>

        <ContentPresenter
            HorizontalAlignment="Center"
            HorizontalContentAlignment="Stretch"
            VerticalAlignment="Top"
            VerticalContentAlignment="Stretch"
            Grid.Row="1"
            Content="{x:Bind BodyOverlayOptionsContent}" />
    </Grid>
</UserControl>
